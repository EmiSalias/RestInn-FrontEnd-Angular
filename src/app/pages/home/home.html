<div class="home-wrapper">

  <!-- HERO / BIENVENIDA -->
  <section class="hero">
    <h2>Â¡Bienvenido a RestInn! ğŸŒŸ</h2>
    <p class="intro">Tu experiencia en hoteles empieza aquÃ­. ğŸ¨âœ¨</p>

    <p class="lead">Con RestInn podÃ©s:</p>

    <ul class="features-list">
      <li>ğŸ“… <strong>Reservar habitaciones</strong> de manera rÃ¡pida y sencilla.</li>
      <li>ğŸ’³ <strong>Gestionar facturas y consumos</strong> durante la estadÃ­a.</li>
      <li>ğŸ›ï¸ <strong>Acceder a servicios adicionales</strong> como desayuno, spa o transporte.</li>
      <li>â­ <strong>Marcar tus favoritos</strong> y volver a ellos cuando quieras.</li>
      <li>ğŸ“Š <strong>Consultar tu historial</strong> de reservas y consumos en un solo lugar.</li>
    </ul>

    <p class="closing">
      Todo esto desde una plataforma fÃ¡cil de usar, pensada para que disfrutes de tu estadÃ­a sin complicaciones. ğŸ›ï¸ğŸ¹
      <br />
      <strong>ExplorÃ¡, reservÃ¡ y hacÃ© de cada visita una experiencia Ãºnica con RestInn.</strong>
    </p>
  </section>

   <!-- FILTRO POR FECHAS -->
  <!-- DISPONIBILIDAD -->
<section class="availability">
  <form class="availability__form" (submit)="$event.preventDefault()">
    <div class="field">
      <label>Fecha de ingreso</label>
      <input
        type="date"
        name="ingreso"
        [(ngModel)]="filtro.ingreso"
        [attr.min]="todayStr"
        (ngModelChange)="onFechaChange()"
        required>
    </div>

    <div class="field">
      <label>Fecha de salida</label>
      <input
        type="date"
        name="salida"
        [(ngModel)]="filtro.salida"
        [attr.min]="filtro.ingreso || todayStr"
        (ngModelChange)="onFechaChange()"
        required>
    </div>

    <button
      type="button"
      class="btn-ghost"
      (click)="limpiarFiltro()"
      *ngIf="filtro.ingreso || filtro.salida">
      Limpiar
    </button>
  </form>

  <small class="error" *ngIf="rangeError">
    La fecha de salida debe ser posterior a la fecha de ingreso.
  </small>

  <div class="availability__info" *ngIf="filtro.ingreso && filtro.salida && !rangeError">
    Mostrando del {{ filtro.ingreso | date:'dd/MM/yyyy' }} al {{ filtro.salida | date:'dd/MM/yyyy' }} â€”
    {{ visibles.length }} resultado(s).
  </div>
</section>


  <!-- LOADING / ERROR -->
  <section class="status" *ngIf="loading || errorMsg">
    <div *ngIf="loading" class="loading">Cargando habitaciones...</div>
    <div *ngIf="!loading && errorMsg" class="error">{{ errorMsg }}</div>
  </section>

  <!-- GRID DE HABITACIONES (usa 'visibles' en lugar de 'habitaciones') -->
  <section class="habitaciones-section" *ngIf="!loading && !errorMsg">
    <h3 class="section-title">Habitaciones disponibles</h3>

    <div class="habitaciones-grid">
      <div class="habitacion-card" *ngFor="let hab of visibles">

        <div class="habitacion-card__image-wrapper">
          <img *ngIf="getMainImageDataUrl(hab) as imgData; else noImg"
               [src]="imgData" [alt]="'HabitaciÃ³n ' + hab.numero"
               class="habitacion-card__image"/>
          <ng-template #noImg>
            <div class="habitacion-card__image habitacion-card__image--placeholder">Sin imagen</div>
          </ng-template>
          <span class="habitacion-card__badge">{{ hab.estado }}</span>
        </div>

        <div class="habitacion-card__body">
          <div class="habitacion-card__header">
            <div class="habitacion-card__title">Hab. #{{ hab.numero }}</div>
            <div class="habitacion-card__sub">Piso {{ hab.piso }} Â· {{ hab.tipo }}</div>
          </div>

          <div class="habitacion-card__details">
            <div class="detail-row"><span class="label">Capacidad:</span><span class="value">{{ hab.capacidad }} huÃ©sped(es)</span></div>
            <div class="detail-row"><span class="label">Camas:</span><span class="value">{{ hab.cantCamas }}</span></div>
            <div class="detail-row"><span class="label">Precio/noche:</span><span class="value price">${{ hab.precioNoche }}</span></div>
            <div class="detail-row" *ngIf="hab.comentario"><span class="label">Nota:</span><span class="value">{{ hab.comentario }}</span></div>
          </div>

          <button class="reservar-btn" (click)="reservar(hab)">Reservar â†’</button>
        </div>

      </div>
    </div>
  </section>

</div>
