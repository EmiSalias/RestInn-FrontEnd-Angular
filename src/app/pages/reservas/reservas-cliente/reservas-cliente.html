<section class="my-reservations-page">
  <h1>Mis reservas</h1>

  <div class="status" *ngIf="loading">Cargando tus reservas...</div>
  <div class="status error" *ngIf="!loading && errorMsg">{{ errorMsg }}</div>

  <div class="reservations-grid"
       *ngIf="!loading && !errorMsg && reservas.length">
    <article class="reservation-card" *ngFor="let r of reservas">
      <header class="reservation-header">
        <div class="room-tag">
          Habitación {{ r.habitacionNumero || r.habitacionId }}
        </div>
        <span class="status-chip"
              [ngClass]="r.estado?.toLowerCase()">
          {{ estadoLabel(r.estado) }}
        </span>
      </header>

      <div class="reservation-body">
        <div class="dates">
          <div>
            <span class="label">Ingreso</span>
            <span class="value">{{ r.fechaIngreso | date:'dd/MM/yyyy' }}</span>
          </div>
          <div>
            <span class="label">Salida</span>
            <span class="value">{{ r.fechaSalida | date:'dd/MM/yyyy' }}</span>
          </div>
        </div>

        <div class="extra">
          <span>{{ contarHuespedes(r) }} huésped(es)</span>
          <span>Reserva #{{ r.id }}</span>
        </div>
      </div>

      <footer class="reservation-footer">
        <button class="link-btn" [routerLink]="['/reserva', r.id]">
          Ver detalle
        </button>
      </footer>
    </article>
  </div>

  <div class="empty" *ngIf="!loading && !errorMsg && !reservas.length">
    Todavía no tenés reservas registradas.
  </div>
</section>
