<main class="auth-card">
    <h2>Editar Perfil</h2>

    <form [formGroup]="form" (ngSubmit)="guardar()">
        <div class="grid-2">
            <label>
                <h4>Nombre</h4>
                <input formControlName="nombre" placeholder="Nombre">
                @if (f['nombre'].touched && f['nombre'].invalid) {
                  <small class="err">Requerido (≥2)</small>
                }
            </label>

            <label>
                <h4>Apellido</h4>
                <input formControlName="apellido" placeholder="Apellido">
                @if (f['apellido'].touched && f['apellido'].invalid) {
                  <small class="err">Requerido (≥2)</small>
                }
            </label>

            <label>
                <h4>Usuario</h4>
                <input formControlName="nombreLogin" placeholder="usuario">
                @if (f['nombreLogin'].touched && f['nombreLogin'].invalid) {
                  <small class="err">3–30 caracteres</small>
                }
            </label>

            <label>
                <h4>Email</h4>
                <input formControlName="email" placeholder="nombre@dominio.com">
                @if (f['email'].touched && f['email'].invalid) {
                  <small class="err">Email inválido</small>
                }
            </label>

            <label>
                <h4>DNI</h4>
                <input formControlName="dni" placeholder="Solo números (7–10)">
                @if (f['dni'].touched && f['dni'].invalid) {
                  <small class="err">Formato inválido</small>
                }
            </label>

            <label>
                <h4>Teléfono</h4>
                <input formControlName="phoneNumber" placeholder="+54 11 5555 5555">
                @if (f['phoneNumber'].touched && f['phoneNumber'].invalid) {
                  <small class="err">Formato inválido</small>
                }
            </label>

            <label>
                <h4>CUIT</h4>
                <input formControlName="cuit" placeholder="11 dígitos">
                @if (f['cuit'].touched && f['cuit'].invalid) {
                  <small class="err">11 dígitos</small>
                }
            </label>

            <label>
                <h4>Rol</h4>
                <input readonly [placeholder]="user?.role">
            </label>
        </div>

        <div class="actions">
            <button type="submit" [disabled]="loading">Guardar cambios</button>

            @if (loading) {
                <span class="hint">Guardando…</span>
            } @else if (errorMsg) {
                <small class="err">{{ errorMsg }}</small>
            } @else {
                <small class="err">Error al guardar los cambios</small>
            } 
        </div>
    </form>
</main>