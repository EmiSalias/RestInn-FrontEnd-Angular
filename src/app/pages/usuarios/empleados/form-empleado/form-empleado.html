<section class="form-creacion-empleado">
  <button type="button" class="back-arrow" (click)="goBack()">
    ←
  </button>
  <div class="form-header">


    <h1>{{ isEditing ? 'Editar empleado' : 'Crear nuevo empleado' }}</h1>
  </div>

  <form [formGroup]="form" (ngSubmit)="onSubmit()">
    @if (errorMsg) {
      <div class="error">{{ errorMsg }}</div>
    }

    <label for="rolEmpleado">Rol</label>
    <select id="rolEmpleado" formControlName="rolEmpleado" (change)="onRoleChange()" required>
      @for (rol of roles; track rol) {
        <option [value]="rol">{{ rol }}</option>
      }
    </select>

    <div class="additional-fields">
      <label for="nombre">Nombre</label>
      <input id="nombre" formControlName="nombre" required>

      <label for="apellido">Apellido</label>
      <input id="apellido" formControlName="apellido" required>

      <label for="nombreLogin">Nombre de usuario</label>
      <input id="nombreLogin" formControlName="nombreLogin" required>

      <label for="dni">DNI</label>
      <input id="dni" formControlName="dni" required>

      <label for="phoneNumber">Teléfono</label>
      <input id="phoneNumber" formControlName="phoneNumber" required>

      <label for="email">Email</label>
      <input id="email" formControlName="email" type="email" required>

      <label for="password">Contraseña</label>
      <input id="password" formControlName="password" type="password">

      <label for="oldPassword">Contraseña actual</label>
      <input id="oldPassword" formControlName="oldPassword" type="password">
    </div>

    <button type="submit" [disabled]="form.invalid">{{ isEditing ? 'Actualizar Emlado' : 'Crear Empleado' }}</button>

    <!-- Botón para activar o desactivar -->
    @if (form.value.activo) {
      <button type="button" (click)="markAsInactive()" class="btn btn-danger">
        Marcar como Inactivo
      </button>
    } @else {
      <button type="button" (click)="markAsActive()" class="btn btn-success">
        Marcar como Activo
      </button>
    }
  </form>
</section>