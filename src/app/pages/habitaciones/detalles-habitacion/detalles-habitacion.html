@if (selectedHab) {
<div class="detalle-wrapper">
  <div class="habitacion-card">

    <!-- === CARRUSEL DE IMÁGENES === -->
    @if (selectedHab.imagenes && selectedHab.imagenes.length > 0) {
    <div class="carousel-wrapper">
      <img
        [src]="'data:' + selectedHab.imagenes[imagenActualIndex].tipo + ';base64,' + selectedHab.imagenes[imagenActualIndex].datosBase64"
        [alt]="'Imagen ' + (imagenActualIndex + 1)" class="carousel-image" />

      <!-- Botones de navegación -->
      <button class="carousel-btn prev" (click)="anteriorImagen()">&#10094;</button>
      <button class="carousel-btn next" (click)="siguienteImagen()">&#10095;</button>

      <!-- Indicadores -->
      <div class="carousel-indicators">
        @for (img of selectedHab.imagenes; let i = $index; track i) {
        <span [class.active]="i === imagenActualIndex" (click)="irAImagen(i)">
        </span>
        }
      </div>
    </div>
    } @else {
    <div class="habitacion-card__image habitacion-card__image--placeholder">
      <p>No posee imágenes</p>
    </div>
    }

    <!-- === INFORMACIÓN === -->
    <div class="habitacion-card__body">
      <div class="habitacion-card__title">
        Hab. {{ selectedHab.numero }} · {{ selectedHab.tipo }}
      </div>
      <div class="habitacion-card__sub">Piso {{ selectedHab.piso }}</div>

      <div class="habitacion-card__details">
        <p>Capacidad: {{ selectedHab.capacidad }}</p>
        <p>Camas: {{ selectedHab.cantCamas }}</p>
        <p class="price">Precio/noche: ${{ selectedHab.precioNoche }}</p>
      </div>

      @if (selectedHab.comentario) {
      <div class="detail-row">
        <span class="label">Nota:</span>
        <span class="value">{{ selectedHab.comentario }}</span>
      </div>
      }
    </div>

    <!-- === BOTONES === -->
    <div class="buttons">
      <button class="btn-primary" (click)="reservarHabitacion(selectedHab)">Reservar</button>

      @if (puedeGestionarHabitaciones) {
      <button class="btn-secondary" (click)="editHabitacion(selectedHab)">Editar</button>
      <button class="btn-danger" (click)="deleteHabitacion(selectedHab.id)">Eliminar</button>
      }

      <button class="btn-back" (click)="volver()">Volver</button>
    </div>

  </div>
</div>
} @else {
<h3 class="error">No se encontró la habitación.</h3>
}